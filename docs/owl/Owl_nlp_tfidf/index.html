<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Owl_nlp_tfidf (owl.Owl_nlp_tfidf)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">owl</a> &#x00BB; Owl_nlp_tfidf</nav><header class="odoc-preamble"><h1>Module <code><span>Owl_nlp_tfidf</span></code></h1><p>NLP: TFIDF module</p></header><nav class="odoc-toc"><ul><li><a href="#type-definition">Type definition</a></li><li><a href="#query-model">Query model</a></li><li><a href="#iteration-functions">Iteration functions</a></li><li><a href="#core-functions">Core functions</a></li><li><a href="#i/o-functions">I/O functions</a></li><li><a href="#helper-functions">Helper functions</a></li></ul></nav><div class="odoc-content"><h6 id="type-definition"><a href="#type-definition" class="anchor"></a>Type definition</h6><div class="odoc-spec"><div class="spec type anchored" id="type-tf_typ"><a href="#type-tf_typ" class="anchor"></a><code><span><span class="keyword">type</span> tf_typ</span><span> = </span></code><ol><li id="type-tf_typ.Binary" class="def variant constructor anchored"><a href="#type-tf_typ.Binary" class="anchor"></a><code><span>| </span><span><span class="constructor">Binary</span></span></code></li><li id="type-tf_typ.Count" class="def variant constructor anchored"><a href="#type-tf_typ.Count" class="anchor"></a><code><span>| </span><span><span class="constructor">Count</span></span></code></li><li id="type-tf_typ.Frequency" class="def variant constructor anchored"><a href="#type-tf_typ.Frequency" class="anchor"></a><code><span>| </span><span><span class="constructor">Frequency</span></span></code></li><li id="type-tf_typ.Log_norm" class="def variant constructor anchored"><a href="#type-tf_typ.Log_norm" class="anchor"></a><code><span>| </span><span><span class="constructor">Log_norm</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Type of term frequency.</p><span class="comment-delim">*)</span></div></li></ol></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-df_typ"><a href="#type-df_typ" class="anchor"></a><code><span><span class="keyword">type</span> df_typ</span><span> = </span></code><ol><li id="type-df_typ.Unary" class="def variant constructor anchored"><a href="#type-df_typ.Unary" class="anchor"></a><code><span>| </span><span><span class="constructor">Unary</span></span></code></li><li id="type-df_typ.Idf" class="def variant constructor anchored"><a href="#type-df_typ.Idf" class="anchor"></a><code><span>| </span><span><span class="constructor">Idf</span></span></code></li><li id="type-df_typ.Idf_Smooth" class="def variant constructor anchored"><a href="#type-df_typ.Idf_Smooth" class="anchor"></a><code><span>| </span><span><span class="constructor">Idf_Smooth</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Type of inverse document frequency.</p><span class="comment-delim">*)</span></div></li></ol></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>Type of a TFIDF model</p></div></div><h6 id="query-model"><a href="#query-model" class="anchor"></a>Query model</h6><div class="odoc-spec"><div class="spec value anchored" id="val-length"><a href="#val-length" class="anchor"></a><code><span><span class="keyword">val</span> length : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Size of Tfidf model, i.e. number of documents contained.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-term_freq"><a href="#val-term_freq" class="anchor"></a><code><span><span class="keyword">val</span> term_freq : <span><a href="#type-tf_typ">tf_typ</a> <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> float</span></code></div><div class="spec-doc"><p><code>term_freq term_count num_words</code> calculates the term frequency weight.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-doc_freq"><a href="#val-doc_freq" class="anchor"></a><code><span><span class="keyword">val</span> doc_freq : <span><a href="#type-df_typ">df_typ</a> <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> float</span></code></div><div class="spec-doc"><p><code>doc_freq doc_count num_docs</code> calculates the document frequency weight.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_uri"><a href="#val-get_uri" class="anchor"></a><code><span><span class="keyword">val</span> get_uri : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Return the path of the TFIDF model.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_corpus"><a href="#val-get_corpus" class="anchor"></a><code><span><span class="keyword">val</span> get_corpus : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Owl_nlp_corpus/index.html#type-t">Owl_nlp_corpus.t</a></span></code></div><div class="spec-doc"><p>Return the corpus contained in TFIDF model</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-vocab_len"><a href="#val-vocab_len" class="anchor"></a><code><span><span class="keyword">val</span> vocab_len : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Return the size of the vocabulary contained in the TFIDF model.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_handle"><a href="#val-get_handle" class="anchor"></a><code><span><span class="keyword">val</span> get_handle : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Stdlib</span>.in_channel</span></code></div><div class="spec-doc"><p>Get the file handle associated with TFIDF model.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-doc_count_of"><a href="#val-doc_count_of" class="anchor"></a><code><span><span class="keyword">val</span> doc_count_of : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> float</span></code></div><div class="spec-doc"><p><code>doc_count_of tfidf w</code> calculate document frequency for a given word <code>w</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-doc_count"><a href="#val-doc_count" class="anchor"></a><code><span><span class="keyword">val</span> doc_count : <span><a href="../Owl_nlp_vocabulary/index.html#type-t">Owl_nlp_vocabulary.t</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>float array</span> * int</span></code></div><div class="spec-doc"><p><code>doc_count vocab fname</code> count occurrency in all documents contained in the raw text corpus of file <code>fname</code>, for all words</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-term_count"><a href="#val-term_count" class="anchor"></a><code><span><span class="keyword">val</span> term_count : <span><span><span>(<span class="type-var">'a</span>, float)</span> <span class="xref-unresolved">Stdlib</span>.Hashtbl.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> array</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>term_count count doc</code> counts the term occurrency in a document, and saves the result in count hashtbl.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-density"><a href="#val-density" class="anchor"></a><code><span><span class="keyword">val</span> density : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> float</span></code></div><div class="spec-doc"><p>Return the percentage of non-zero elements in doc-term matrix.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-doc_to_vec"><a href="#val-doc_to_vec" class="anchor"></a><code><span><span class="keyword">val</span> doc_to_vec : 
  <span><span><span>(float, <span class="type-var">'a</span>)</span> <span class="xref-unresolved">Stdlib</span>.Bigarray.kind</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(int * float)</span> array</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(float, <span class="type-var">'a</span>)</span> <a href="../Owl_dense_ndarray/Generic/index.html#type-t">Owl_dense.Ndarray.Generic.t</a></span></span></code></div><div class="spec-doc"><p><code>doc_to_vec kind tfidf vec</code> converts a TFIDF vector from its sparse represents to dense ndarray vector whose length equals the vocabulary size.</p></div></div><h6 id="iteration-functions"><a href="#iteration-functions" class="anchor"></a>Iteration functions</h6><div class="odoc-spec"><div class="spec value anchored" id="val-get"><a href="#val-get" class="anchor"></a><code><span><span class="keyword">val</span> get : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span>(int * float)</span> array</span></span></code></div><div class="spec-doc"><p>Return the ith TFIDF vector in the model. The format of return is <code>(vocabulary index, weight)</code> tuple array of a document.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-next"><a href="#val-next" class="anchor"></a><code><span><span class="keyword">val</span> next : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(int * float)</span> array</span></span></code></div><div class="spec-doc"><p>Return the next document vector in the model. The format of return is <code>(vocabulary index, weight)</code> tuple array of a document.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-next_batch"><a href="#val-next_batch" class="anchor"></a><code><span><span class="keyword">val</span> next_batch : <span>?size:int <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(int * float)</span> array</span> array</span></span></code></div><div class="spec-doc"><p>Return the next batch of document vectors in the model, the default size is 100.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-iteri"><a href="#val-iteri" class="anchor"></a><code><span><span class="keyword">val</span> iteri : <span><span>(<span>int <span class="arrow">&#45;&gt;</span></span> <span><span><span>(int * float)</span> array</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Iterate all the document vectors in a TFIDF model. The format of document vector is <code>(vocabulary index, weight)</code> tuple array of a document.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mapi"><a href="#val-mapi" class="anchor"></a><code><span><span class="keyword">val</span> mapi : <span><span>(<span>int <span class="arrow">&#45;&gt;</span></span> <span><span><span>(int * float)</span> array</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> array</span></span></code></div><div class="spec-doc"><p>Map all the document vectors in a TFIDF model. The format of document vector is <code>(vocabulary index, weight)</code> tuple array of a document.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-reset_iterators"><a href="#val-reset_iterators" class="anchor"></a><code><span><span class="keyword">val</span> reset_iterators : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Reset the iterator to the beginning of the TFIDF model.</p></div></div><h6 id="core-functions"><a href="#core-functions" class="anchor"></a>Core functions</h6><div class="odoc-spec"><div class="spec value anchored" id="val-build"><a href="#val-build" class="anchor"></a><code><span><span class="keyword">val</span> build : 
  <span>?norm:bool <span class="arrow">&#45;&gt;</span></span>
  <span>?sort:bool <span class="arrow">&#45;&gt;</span></span>
  <span>?tf:<a href="#type-tf_typ">tf_typ</a> <span class="arrow">&#45;&gt;</span></span>
  <span>?df:<a href="#type-df_typ">df_typ</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Owl_nlp_corpus/index.html#type-t">Owl_nlp_corpus.t</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>This function builds up a TFIDF model according to the passed in parameters.</p><p>Parameters: * <code>norm</code>: whether to normalise the vectors in the TFIDF model, default is <code>false</code>. * <code>sort</code>: whether to sort the terms in a TFIDF vector in increasing order w.r.t their vocabulary indices. The default is <code>false</code>. * <code>tf</code>: type of term frequency used in building TFIDF. The default is <code>Count</code>. * <code>df</code>: type of document frequency used in building TFIDF. The default is <code>Idf</code>. * <code>corpus</code>: the corpus built by <code>Owl_nlp_corpus</code> model atop of which TFIDF will be built.</p></div></div><h6 id="i/o-functions"><a href="#i/o-functions" class="anchor"></a>I/O functions</h6><div class="odoc-spec"><div class="spec value anchored" id="val-save"><a href="#val-save" class="anchor"></a><code><span><span class="keyword">val</span> save : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>save tfidf fname</code> saves the TFIDF to a file of given file name <code>fname</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-load"><a href="#val-load" class="anchor"></a><code><span><span class="keyword">val</span> load : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>load fname</code> loads a TFIDF from a file of name <code>fname</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_string"><a href="#val-to_string" class="anchor"></a><code><span><span class="keyword">val</span> to_string : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Convert a TFIDF to its string representation, contains summary information.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-print"><a href="#val-print" class="anchor"></a><code><span><span class="keyword">val</span> print : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Pretty print out the summary information of a TFIDF model.</p></div></div><h6 id="helper-functions"><a href="#helper-functions" class="anchor"></a>Helper functions</h6><div class="odoc-spec"><div class="spec value anchored" id="val-tf_typ_string"><a href="#val-tf_typ_string" class="anchor"></a><code><span><span class="keyword">val</span> tf_typ_string : <span><a href="#type-tf_typ">tf_typ</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Convert term frequency type into string.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-df_typ_string"><a href="#val-df_typ_string" class="anchor"></a><code><span><span class="keyword">val</span> df_typ_string : <span><a href="#type-df_typ">df_typ</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Convert document frequency type into string.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-apply"><a href="#val-apply" class="anchor"></a><code><span><span class="keyword">val</span> apply : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>(int * float)</span> array</span></span></code></div><div class="spec-doc"><p>Convert a single document according to a given model</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-normalise"><a href="#val-normalise" class="anchor"></a><code><span><span class="keyword">val</span> normalise : <span><span><span>(<span class="type-var">'a</span> * float)</span> array</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span> * float)</span> array</span></span></code></div><div class="spec-doc"><p><code>normalise x</code> makes <code>x</code> a unit vector by dividing its l2norm.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : <span><a href="#type-tf_typ">tf_typ</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-df_typ">df_typ</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Owl_nlp_corpus/index.html#type-t">Owl_nlp_corpus.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Wrap up a TFIDF model type. Low-level function and you are not supposed to use it.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-all_pairwise_distance"><a href="#val-all_pairwise_distance" class="anchor"></a><code><span><span class="keyword">val</span> all_pairwise_distance : 
  <span><a href="../Owl_nlp_similarity/index.html#type-t">Owl_nlp_similarity.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'a</span> * float)</span> array</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(int * float)</span> array</span></span></code></div><div class="spec-doc"><p>Calculate pairwise distance for the whole model, return format is <code>(id,dist)</code> array.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-nearest"><a href="#val-nearest" class="anchor"></a><code><span><span class="keyword">val</span> nearest : 
  <span>?typ:<a href="../Owl_nlp_similarity/index.html#type-t">Owl_nlp_similarity.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'a</span> * float)</span> array</span> <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="arrow">&#45;&gt;</span></span>
  <span><span>(int * float)</span> array</span></span></code></div><div class="spec-doc"><p>Return K-nearest neighbours, it is very slow due to linear search.</p></div></div></div></body></html>